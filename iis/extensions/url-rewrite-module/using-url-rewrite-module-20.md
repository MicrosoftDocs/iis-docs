---
title: "Using URL Rewrite Module 2.0"
author: ruslany
description: "This section of the documentation applies to the URL Rewrite 2.0 for IIS 7. URL Rewrite 2.0 for IIS 7 and above is an incremental release that includes all..."
ms.date: 07/16/2009
ms.assetid: 710f37f3-cba4-452c-b6ae-ba96abcfdf86
msc.legacyurl: /learn/extensions/url-rewrite-module/using-url-rewrite-module-20
msc.type: authoredcontent
---
Using URL Rewrite Module 2.0
====================
by [Ruslan Yakushev](https://github.com/ruslany)

## Introduction

This section of the documentation applies to the **URL Rewrite 2.0 for IIS 7**.

URL Rewrite 2.0 for IIS 7 and above is an incremental release that includes all the features from [version 1.1](using-the-url-rewrite-module.md), and adds support for .NET extensibility and for outbound response rewriting. More specifically, it can be used to:

- Implement complex rewrite logic by using rewrite providers written in .NET
- Replace the URLs generated by a web application in the response HTML with a more user friendly and search engine friendly equivalent
- Modify the links in the HTML markup generated by a web application behind a reverse proxy.
- Fix up the content of any HTTP response by using regular expression pattern matching.
- Modify HTTP request and response headers and IIS server variables.

## Features

URL Rewrite 2.0 includes the following key features:

- [Custom rewrite providers](using-custom-rewrite-providers-with-url-rewrite-module.md) (new in RTW). The rewrite providers can be used when an URL rewrite logic cannot be expressed in terms of regular expression patterns or when it is required to make rewriting decisions based on data stored outside of web.config file (e.g. SQL database or text files). Customer rewrite providers can be [implemented in any .NET language](developing-a-custom-rewrite-provider-for-url-rewrite-module.md).
- [Rules-based response rewriting engine](url-rewrite-module-20-configuration-reference.md#Outbound_Rules_Overview). Outbound rules are used to express the logic of what to compare parts of the response with and what to do if comparison was successful. Web server and site administrators can use outbound rules to define complex response rewriting logic.
- [Rewriting within the content of specific HTML tags](url-rewrite-module-20-configuration-reference.md#Tag_Filters). Instead of scanning the entire response for a particular match, the rule can be configured to look only inside of certain HTML tags, such as &lt;a&gt;, &lt;img&gt;, etc. That way the pattern is greatly simplified and the process of applying the rule to the content is much faster comparing to applying the pattern to the entire response.
- [Pre-conditions for outbound rules](url-rewrite-module-20-configuration-reference.md#Pre-conditions_collection). Applying rewrite rules on every response is an expensive operation and is not necessary in majority of the cases. Pre-conditions are used to check the response metadata to determine if outbound rules evaluation should be applied.
- [Rewriting of server variables and HTTP request headers](url-rewrite-module-20-configuration-reference.md#Setting_Server_Variables). Various IIS server variables and HTTP request headers can be set by using rewrite rules.
- [Rewriting of HTTP response headers](url-rewrite-module-20-configuration-reference.md#Setting_Response_Headers). Outbound rewrite rules can be used modify any existing HTTP response headers or to set new ones.
- [Allow list for server variables](url-rewrite-module-20-configuration-reference.md#Allowed_Server_Variables_List). To prevent distributed rewrite rules from accidentally or purposefully modifying IIS server variables that may affect security or runtime behavior of a web application the modifiable server variables now have to be explicitly added to the allow list.
- [HtmlEncode function](url-rewrite-module-20-configuration-reference.md). Outbound rewrite may often use an un-trusted data (e.g. query string or HTTP headers) to build a replacement string to insert into the HTTP response. In those cases the HtmlEncode function should be used to prevent insertion of client-side scripts into the response, which could result in cross-site scripting vulnerability.
- [Tracking capture groups across rule conditions](url-rewrite-module-20-configuration-reference.md#Using_back-references_in_rewrite_rules). The conditions back-referencing logic in URL Rewrite 1.1 worked only against the last matched conditions. In v2 it is possible to configure back-referencing logic to work against all matched conditions.
- [Rule templates for Search Engine Optimization](seo-rule-templates.md) (new in RTW). Three new rule templates make it very easy to create redirect rules that will enforce usage of canonical URLs for web pages on your site.
- [Reverse Proxy rule template](reverse-proxy-rule-template.md) (new in RTW). This template can be used to very quickly generate inbound and outbound rewrite rules that implement reverse proxy configuration.
- [Logging of rewritten URLs](url-rewrite-module-20-configuration-reference.md#Logging_Rewritten_URL). The rewrite rules can be configured to log the rewritten URL in IIS W3C logs as opposed to logging an originally requested URL.
- **Updated user interface in IIS Manager**. The user interface has been significantly improved to better represent the module configuration and to simplify such common tasks as configuring of rewrite rules and rewrite conditions.

## Installing the module

Download the URL Rewrite 2.0 by using the links at the module's home page at [https://www.iis.net/extensions/urlrewrite](https://www.iis.net/downloads/microsoft/url-rewrite)

> [!NOTE]
>  
> 
> - If a previous version of URL Rewrite, such as v1.0 and v1.1, is already installed then it will be upgraded to the v2.0
> - If an RC version of the URL Rewrite 2.0 is already installed, then it will be upgraded to RTW version.

### Known Issues

1. Response rewriting does not work with static compression. You will have to disable IIS static compression in order to use response rewriting.
2. Outbound rules are not applied to chunked transfer encoded responses if **rewriteBeforeCache** is enabled. Set **rewriteBeforeCache** to false if you need to rewrite responses that are chunked transfer encoded.

## Installing the extensibility samples

The [URL Rewrite Extensibility Samples](https://code.msdn.microsoft.com/Project/Download/FileDownload.aspx?ProjectName=rewriteextensibility&amp;DownloadId=9257) include the .NET assemblies and the source code implementing these providers:

- **DbProvider** - this provider can be used to retrieve rewrite mappings from a SQL Server database table by executing a stored procedure;
- **FileMapProvider** - this provider can be used to retrieve rewrite mappings stored in a text file;
- **FileContainsProvider** - this provider can be used to check if any string in a text file is a substring of the provider's input string.

Download the [URL Rewrite Extensibility Samples from MSDN Code Gallery](https://code.msdn.microsoft.com/Project/Download/FileDownload.aspx?ProjectName=rewriteextensibility&amp;DownloadId=9257).

## Using the module

These articles cover the functionality of the URL Rewrite v2.0 and explain how to use it to accomplish common rewriting scenarios.

### Walkthroughs

- [Using Custom Rewrite Providers with URL Rewrite Module](using-custom-rewrite-providers-with-url-rewrite-module.md)
- [Developing a Custom Rewrite Provider for URL Rewrite Module](developing-a-custom-rewrite-provider-for-url-rewrite-module.md)
- [Creating Outbound Rules for URL Rewrite Module](creating-outbound-rules-for-url-rewrite-module.md)
- [Reverse Proxy with URL Rewrite 2.0 and Application Request Routing](reverse-proxy-with-url-rewrite-v2-and-application-request-routing.md)
- [Using Outbound Rules to insert Web Analytics Tracking Code](using-outbound-rules-to-add-web-analytics-tracking-code.md)
- [Setting HTTP Request Headers and Server Variables](setting-http-request-headers-and-iis-server-variables.md)
- [Modifying HTTP Response Headers](modifying-http-response-headers.md)
- [SEO Rule Templates](seo-rule-templates.md)
- [User Friendly URL - rule template](user-friendly-url-rule-template.md)
- [Reverse Proxy - Rule Template](reverse-proxy-rule-template.md)

### Functionality reference

- [URL Rewrite Module v2.0 configuration reference](url-rewrite-module-20-configuration-reference.md)
